# Here you can define all your data sets by using simple YAML syntax.
#
# Documentation for this file format can be found in "The Data Catalog"
# Link: https://docs.kedro.org/en/stable/data/data_catalog.html
#
# COVID-19 Chile Analysis Project Data Catalog
# Proyecto de Análisis COVID-19 Chile 2020-2022

# =====================================================
# RAW DATA - Datos originales (01_raw)
# =====================================================

# Dataset principal - COVID Chile 2020
raw_covid_2020:
  type: pandas.CSVDataset
  filepath: data/01_raw/chile_completo_covid_2020.csv
  load_args:
    encoding: utf-8

# Dataset principal - COVID Chile 2021  
raw_covid_2021:
  type: pandas.CSVDataset
  filepath: data/01_raw/chile_completo_covid_2021.csv
  load_args:
    sep: ";"
    encoding: cp1252

# Dataset principal - COVID Chile 2022
raw_covid_2022:
  type: pandas.CSVDataset
  filepath: data/01_raw/chile_completo_covid_2022.csv
  load_args:
    encoding: utf-8

# =====================================================
# INTERMEDIATE DATA - Datos procesados parcialmente (02_intermediate)
# =====================================================

intermediate_covid_2020:
  type: pandas.CSVDataset
  filepath: data/02_intermediate/covid_2020_clean.csv
  load_args:
    encoding: latin-1
    parse_dates: ['date']
  save_args:
    index: false
    encoding: latin-1

intermediate_covid_2021:
  type: pandas.CSVDataset
  filepath: data/02_intermediate/covid_2021_clean.csv
  load_args:
    encoding: latin-1
    parse_dates: ['date']
  save_args:
    index: false
    encoding: latin-1

intermediate_covid_2022:
  type: pandas.CSVDataset
  filepath: data/02_intermediate/covid_2022_clean.csv
  load_args:
    encoding: latin-1
    parse_dates: ['date']
  save_args:
    index: false
    encoding: latin-1

# =====================================================
# PRIMARY DATA - Datos limpios integrados (03_primary)
# =====================================================

primary_covid_complete:
  type: pandas.CSVDataset
  filepath: data/03_primary/covid_chile_complete.csv
  load_args:
    parse_dates: ['date']

primary_covid_national:
  type: pandas.CSVDataset
  filepath: data/03_primary/covid_chile_national_daily.csv
  load_args:
    parse_dates: ['date']

# =====================================================
# FEATURE DATA - Features para modelado (04_feature)
# =====================================================

feature_covid_time_series:
  type: pandas.CSVDataset
  filepath: data/04_feature/covid_features_timeseries.csv

feature_covid_regional:
  type: pandas.CSVDataset
  filepath: data/04_feature/covid_features_regional.csv

# =====================================================
# CAPA 05: MODEL INPUT - Datasets listos para ML
# =====================================================

regression_dataset:
  type: pandas.CSVDataset
  filepath: data/05_model_input/regression_dataset.csv
  save_args:
    index: False

classification_dataset:
  type: pandas.CSVDataset
  filepath: data/05_model_input/classification_dataset.csv
  save_args:
    index: False

# =====================================================
# CAPA 05: MODEL INPUT - Splits de datos
# =====================================================

regression_splits:
  type: pickle.PickleDataset
  filepath: data/05_model_input/regression_splits.pkl

classification_splits:
  type: pickle.PickleDataset
  filepath: data/05_model_input/classification_splits.pkl

# =====================================================
# CAPA 06: MODELS - Modelos entrenados
# =====================================================

trained_regression_models:
  type: pickle.PickleDataset
  filepath: data/06_models/trained_regression_models.pkl

trained_classification_models:
  type: pickle.PickleDataset
  filepath: data/06_models/trained_classification_models.pkl

# =====================================================
# CAPA 07: MODEL OUTPUT - Resultados y métricas
# =====================================================

regression_metrics:
  type: json.JSONDataset
  filepath: data/07_model_output/regression_metrics.json

classification_metrics:
  type: json.JSONDataset
  filepath: data/07_model_output/classification_metrics.json

best_models_report:
  type: json.JSONDataset
  filepath: data/07_model_output/best_models_report.json

feature_importance_analysis:
  type: json.JSONDataset
  filepath: data/07_model_output/feature_importance_analysis.json

# =====================================================
# CAPA 08: REPORTING - Outputs para reporting
# =====================================================

regression_results:
  type: json.JSONDataset
  filepath: data/08_reporting/regression_results.json

classification_results:
  type: json.JSONDataset
  filepath: data/08_reporting/classification_results.json

combined_covid_regional:
  type: MemoryDataset

# =====================================================
# HYPERPARAMETER TUNING OUTPUTS
# =====================================================

tuned_regression_results:
  type: pickle.PickleDataset
  filepath: data/06_models/tuned_regression_results.pkl

tuned_classification_results:
  type: pickle.PickleDataset
  filepath: data/06_models/tuned_classification_results.pkl

# Resultados de tuning en JSON para análisis
tuning_summary:
  type: json.JSONDataset
  filepath: data/08_reporting/tuning_summary.json